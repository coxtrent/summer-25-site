<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>HTML 5 Boilerplate</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <h1>Login To The Hidden Genius Project</h1>
    <form id="login-form" method="POST" action="/api/login">
  <input name="username" type="text" />
  <input name="password" type="password" />
  <button type="submit">Login</button>
  <div id="error-message" style="color:red;"></div>
</form>
<script>
document.getElementById('login-form').addEventListener('submit', async function(e) {
  e.preventDefault(); // Prevent default form submission

  const form = e.target;
  const formData = new FormData(form);
  const params = new URLSearchParams(formData);

  const response = await fetch('/api/login', {
    method: 'POST',
    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
    body: params
  });

  const text = await response.text();

  if (text.includes('Login successful')) {
    // On success, redirect to the index page
    window.location = '/';
  } else {
    // On failure, show error message
    document.getElementById('error-message').textContent = 'Login failed. Please try again.';
  }
});
</script>
    <p><a href="/">Go back to home</a></p>
    <p><a href="/about">Click here to learn more</a></p>
  </body>
</html>